<!doctype html>

<!-- 
Mediator.js Library - test page
Copyright 2011 Jack Lawson
MIT Licensed (http://www.opensource.org/licenses/mit-license.php)
For more information: (http://www.thejacklawson.com/index.php/2011/06/mediators-for-modularized-asynchronous-programming-in-javascript/) 
Project on GitHub: https://github.com/ajacksified/Mediator.js
-->

<html>
  <head>
    <title>Mediator Test</title>
  </head>

  <body>
    Testing the Mediator: <button onclick="Test();">Push Buttan</button>
    <script src="mediator.js"></script>
    <script>
      function Test(){
        var mediator = new Mediator();

        mediator.Subscribe(0, function(){ alert("Tested adding typed anonymous functions."); });
        mediator.Publish({Type: 0});
        mediator.Remove(0);
        mediator.Publish({Type: 0});

        mediator.Subscribe(1, AlertMessage);
        mediator.Subscribe(1, LogMessage);
        mediator.Publish({ Type: 1, Message: "I am alerted and logged." });
        mediator.Remove(1, AlertMessage);
        mediator.Publish({ Type: 1, Message: "I am only logged." });

        mediator.Subscribe(FilterMessages, AlertMessage);
        mediator.Subscribe(FilterMessages, LogMessage);
        mediator.Publish({ From: "Audrey", Message: "This message shouldn't apear." });
        mediator.Publish({ From: "Jack", Message: "This message should ony alert once, and be logged twice." });
        mediator.Remove(FilterMessages, AlertMessage);
        mediator.Publish({ From: "Jack", Message: "This message should ony alert once, and be logged twice." });
      }

      function AlertMessage(data){
        alert(data.Message);
      }

      function LogMessage(data){
        console.log(data.Message);
      }

      function FilterMessages(data){
        return data.From == "Jack";
      }
    </script>
  </body>
</html>
