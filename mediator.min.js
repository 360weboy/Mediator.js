(function(){function d(){if(!this instanceof d)return new d;else this._callbacks={Predicates:[]}}d.prototype={Subscribe:function(b,c,a){a===void 0&&(a=window);typeof b==="function"?this._callbacks.Predicates.push({predicate:b,fn:c,context:a}):(this._callbacks[b]||(this._callbacks[b]=[]),this._callbacks[b].push({fn:c,context:a}))},Remove:function(b,c){if(this._callbacks.Predicates.length>0&&typeof b=="function")for(var a={},e=0,d=this._callbacks.Predicates.length;e<d;e++)a=this._callbacks.Predicates[e],
a.predicate==b&&(!c||c==a.fn)&&this._callbacks.Predicates.splice(e,1);else if(this._callbacks[b])if(c)for(a in this._callbacks[b])this._callbacks[b][a].fn==c&&this._callbacks[b].splice(a,1);else this._callbacks[b]=[]},Publish:function(b){var c=Array.prototype.slice.call(arguments,1),a;if(b!==void 0&&this._callbacks[b])for(var e in this._callbacks[b])a=this._callbacks[b],a.hasOwnProperty(e)&&(a=a[e],a.fn.apply(a.context,c));for(var d in this._callbacks.Predicates)context=window,a=this._callbacks.Predicates[d],
a.predicate.apply(a.context,c)&&a.fn.apply(a.context,c)}};window.Mediator=d})(window);

